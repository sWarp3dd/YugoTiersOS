<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minecraft Tierlist</title>
  <style>
    body {
      background-image: url("icons/thumb-1920-478314.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      margin: 0;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }

    #player-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
      max-width: 1000px;
      margin: 20px auto 0;
    }

    .player-link {
      text-decoration: none;
    }

    .player {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      background-color: #4c3e30;
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
      height: 100px;
      box-sizing: border-box;
      align-items: center;
      transition: transform 0.3s ease, background-color 0.3s ease, border 0.3s ease;
      cursor: pointer;
    }

    .player:hover {
      transform: translateX(-15px);
      background-color: #ffbb33;
      border: 4px solid rgb(255, 255, 255);
    }

    .left-side {
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: left;
      width: 40%;
    }

    .left-side h2 {
      font-size: 20px;
      margin: 0 0 5px 0;
    }

    .first-place {
      color: gold;
    }

    .first-place:hover {
      color: red;
    }

    .second-place {
      color: rgb(255, 255, 255);
    }

    .third-place {
      color: #cd7f32;
    }

    .other-players {
      color: #8b8b8b;
    }

    .info {
      font-size: 14px;
      color: #ccc;
    }

    .right-side {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      flex-wrap: wrap;
      width: 80%;
      gap: 10px;
    }

    .tier {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      width: 60px;
      font-size: 12px;
      user-select: none;
    }

    .tier img {
      width: 30px;
      height: 30px;
      margin-bottom: 5px;
    }

    .tier span {
      font-weight: bold;
    }

    .HT1 { color: red; }
    .LT1 { color: rgb(255, 136, 0); }
    .HT2 { color: rgb(255, 217, 0); }
    .LT2 { color: rgb(123, 255, 0); }
    .HT3 { color: rgb(0, 255, 98); }
    .LT3 { color: rgb(0, 255, 213); }
    .HT4 { color: rgb(0, 68, 255); }
    .LT4 { color: rgb(89, 0, 255); }
    .HT5 { color: rgb(225, 0, 255); }
    .LT5 { color: rgb(114, 0, 76); }
    .RLT1, .RLT2, .RHT1, .RHT2 {
      color: rgb(168, 168, 168);
      font-weight: bold;
    }

    .retired {
      color: rgb(168, 168, 168);
      font-weight: bold;
    }

    .custom-button {
      background-color: #ffffff;
      color: #4c3e30;
      border: none;
      padding: 20px 40px;
      font-size: 20px;
      font-weight: bold;
      border-radius: 12px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .custom-button:hover {
      background-color: #7e7e7e;
    }

    .tooltip {
      display: none;
      position: absolute;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #242424;
      color: white;
      padding: 5px 8px;
      font-size: 20px;
      border-radius: 25px;
      white-space: nowrap;
      z-index: 10;
      font-weight: bold;
      pointer-events: none;
    }

    .tier:hover .tooltip {
      display: block;
    }

    .kit-selector {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin: 100px 0 20px;
    }

    .kit-button {
      background-color: #4c3e30;
      color: white;
      border: none;
      padding: 10px 25px;
      font-size: 1.2em;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      width: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      height: 40px;
    }

    .kit-button:hover {
      background-color: #ffbb33;
      transform: translateY(-15px);
    }

    .kit-button:active {
      background: linear-gradient(45deg, #7e7e7e, #646464);
    }

    .kit-display {
      text-align: center;
      max-width: 100%;
      margin-top: 50px;
    }

    #search-bar {
      position: absolute;
      top: 10px;
      right: 20px;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background-color: #1e1e1e;
      color: white;
      font-size: 14px;
      width: 200px;
      transition: width 0.3s ease;
      z-index: 100;
    }

    #search-bar:focus {
      width: 250px;
      outline: none;
      border-color: #ffbb33;
    }

    .allpbutton {
      background-color: #1e1e1e;
      color: white;
      border: none;
      padding: 10px 25px;
      font-size: 1.2em;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      width: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      height: 30px;
      margin: 40px 0 0 0;
      float: right;
      max-height: 30px;
    }

    .tittle-box {
      margin-top: 50px;
    }

    .discordlogo {
      position: absolute;
      left: 20px;
      top: 10px;
      border-radius: 20px;
      transition: box-shadow 0.15s ease;
      margin-top: 15px;
      margin-left: 15px;
      cursor: pointer;
      z-index: 100;
    }

    .discordlogo:hover {
      box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);
    }

    .discordlogo:active {
      background-color: rgb(29, 29, 255);
    }

    .discordlogo img {
      width: 100%;
      max-width: 200px;
      height: auto;
      border-radius: 16px;
      transition: box-shadow 0.15s;
      display: block;
      margin: auto;
    }

    @media (max-width: 600px) {
      .discordlogo img {
        max-width: 150px;
      }
    }

    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
    }
  </style>
</head>
<body>
  <div>
    <a class="tittle-box">
      <img
        src="https://cdn.discordapp.com/attachments/1086215178148973075/1139168503081462908/Logo_Yugotiers.png"
        alt="Yugotiers logo"
        style="width: 300px; height: 90px; margin: 10px auto; display: block"
      />
    </a>

    <input
      type="text"
      id="search-bar"
      placeholder="Search player"
      autocomplete="off"
    />

    <button class="allpbutton" id="show-all-btn">Show all</button>

    <div class="kit-selector" id="kit-selector">
      <!-- Kit buttons will be dynamically inserted here -->
    </div>

    <div class="kit-display" id="kit-display"></div>

    <div id="player-list"></div>
  </div>

  <script>
    let players = [];

fetch('players.json')
  .then(response => response.json())
  .then(data => {
    players = data;
    renderPlayers(); // render once data is loaded
  })
  .catch(err => {
    console.error('Failed to load players.json', err);
  });

    // Kits you want to filter by (adjust or add kits here)
    const kits = ["CRYSTALS", "SOULS", "FURY", "SHARDS"];

    // Initially active kit (if you want a default)
    let activeKit = kits[0];

    // Helper: Get CSS class from tier string
    function getTierClass(tier) {
      if (!tier) return "";
      return tier.replace(/\s+/g, "");
    }

    // Render player list filtered by kit and search
    function renderPlayers(filterText = "") {
      const playerList = document.getElementById("player-list");
      playerList.innerHTML = "";

      // Filter players by search text (case insensitive)
      const filteredPlayers = players.filter((player) =>
        player.name.toLowerCase().includes(filterText.toLowerCase())
      );

      // Sort players alphabetically or keep original order as you prefer
      filteredPlayers.sort((a, b) => a.name.localeCompare(b.name));

      filteredPlayers.forEach((player, index) => {
        const playerLink = document.createElement("a");
        playerLink.href = player.url;
        playerLink.target = "_blank";
        playerLink.classList.add("player-link");

        const playerDiv = document.createElement("div");
        playerDiv.classList.add("player");

        // Left side with placement and name
        const leftSide = document.createElement("div");
        leftSide.classList.add("left-side");

        const playerName = document.createElement("h2");
        playerName.textContent = player.name;

        // Set color classes for top 3
        if (index === 0) {
          playerName.classList.add("first-place");
        } else if (index === 1) {
          playerName.classList.add("second-place");
        } else if (index === 2) {
          playerName.classList.add("third-place");
        } else {
          playerName.classList.add("other-players");
        }

        // Show placement for players 4 and onward
        if (index > 2) {
          const placement = document.createElement("h3");
          placement.textContent = index + 1;
          placement.style.margin = "0 0 5px 0";
          leftSide.appendChild(placement);
        }

        leftSide.appendChild(playerName);

        // Info text if needed (optional)
        // const info = document.createElement("div");
        // info.classList.add("info");
        // info.textContent = "Some info";
        // leftSide.appendChild(info);

        playerDiv.appendChild(leftSide);

        // Right side with tiers for active kit
        const rightSide = document.createElement("div");
        rightSide.classList.add("right-side");

        // Find tier object matching active kit index, or show all tiers if you want
        // Since your tiers are arrays, and you haven't specified which kit index matches which kit name,
        // let's assume kits map by index, e.g. CRYSTALS = tiers[0], SOULS = tiers[1], etc.

        const kitIndex = kits.indexOf(activeKit);

        // Defensive check
        if (kitIndex >= 0 && kitIndex < player.tiers.length) {
          const tierObj = player.tiers[kitIndex];
          const tierSpan = document.createElement("div");
          tierSpan.classList.add("tier");
          tierSpan.classList.add(getTierClass(tierObj.tier));
          tierSpan.title = `Tier: ${tierObj.tier}\nPeak Tier: ${tierObj.peakTier}`;

          // Optionally add an icon or tier label here:
          const tierLabel = document.createElement("span");
          tierLabel.textContent = tierObj.tier;
          tierSpan.appendChild(tierLabel);

          // Tooltip with peak tier (custom)
          const tooltip = document.createElement("div");
          tooltip.classList.add("tooltip");
          tooltip.textContent = `Peak: ${tierObj.peakTier}`;
          tierSpan.appendChild(tooltip);

          rightSide.appendChild(tierSpan);
        } else {
          // Show something if no tier for this kit
          const noTier = document.createElement("span");
          noTier.textContent = "N/A";
          rightSide.appendChild(noTier);
        }

        playerDiv.appendChild(rightSide);
        playerLink.appendChild(playerDiv);
        playerList.appendChild(playerLink);
      });
    }

    // Render kit selector buttons
    function renderKitSelector() {
      const kitSelector = document.getElementById("kit-selector");
      kitSelector.innerHTML = "";

      kits.forEach((kit) => {
        const button = document.createElement("button");
        button.classList.add("kit-button");
        button.textContent = kit;
        if (kit === activeKit) {
          button.style.backgroundColor = "#ffbb33"; // Highlight active kit
        }
        button.addEventListener("click", () => {
          activeKit = kit;
          renderPlayers(document.getElementById("search-bar").value);
          renderKitSelector();
        });
        kitSelector.appendChild(button);
      });
    }

    // Search functionality
    const searchBar = document.getElementById("search-bar");
    searchBar.addEventListener("input", () => {
      const searchText = searchBar.value.trim();
      renderPlayers(searchText);
    });

    // Show all button to clear search
    const showAllBtn = document.getElementById("show-all-btn");
    showAllBtn.addEventListener("click", () => {
      searchBar.value = "";
      renderPlayers("");
    });

    // Initial render
    renderKitSelector();
    renderPlayers("");
  </script>
</body>
</html>
